```text
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—
â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•—
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•—
â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•â• â•šâ•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•     â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•
=============================================================================
      ğŸš€ PERFORMANCE TESTING & DATABASE UTILITY TOOLKIT GUIDE ğŸš€
=============================================================================
```

# ğŸ“˜ HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng Bá»™ Benchmark

ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i bá»™ cÃ´ng cá»¥ kiá»ƒm thá»­ hiá»‡u nÄƒng dÃ nh cho Case Study so sÃ¡nh **MySQL vs PostgreSQL vs MongoDB**. TÃ i liá»‡u nÃ y sáº½ hÆ°á»›ng dáº«n báº¡n cÃ¡ch sá»­ dá»¥ng cÃ¡c script Ä‘á»ƒ Ä‘o lÆ°á»ng, phÃ¢n tÃ­ch vÃ  thao tÃ¡c dá»¯ liá»‡u.

---

## âš™ï¸ 1. Cáº¥u HÃ¬nh MÃ´i TrÆ°á»ng (.env)

TrÆ°á»›c khi cháº¡y báº¥t ká»³ lá»‡nh nÃ o, hÃ£y Ä‘áº£m báº£o báº¡n Ä‘Ã£ trá» `DB_CONNECTION` vÃ o Ä‘Ãºng database muá»‘n thao tÃ¡c trong file `.env`.

```ini
# --- CHá»ŒN MÃ”I TRÆ¯á»œNG TEST ---

# 1. Äá»ƒ test MongoDB:
DB_CONNECTION=mongodb
DATABASE_URL=mongodb://localhost:27017/cnnt_casestudy

# 2. Äá»ƒ test MySQL:
# DB_CONNECTION=mysql
# DATABASE_URL=mysql://root:root@localhost:3306/cnnt_casestudy

# 3. Äá»ƒ test PostgreSQL:
# DB_CONNECTION=postgresql
# DATABASE_URL=postgresql://postgres:password@localhost:5432/cnnt_casestudy
```

---

## ğŸ› ï¸ 2. CÃ´ng Cá»¥ Tiá»‡n Ãch (Utility Tools)

NhÃ³m cÃ´ng cá»¥ nÃ y giÃºp báº¡n thao tÃ¡c nhanh vá»›i database tá»« dÃ²ng lá»‡nh (CLI) mÃ  khÃ´ng cáº§n má»Ÿ GUI.

| Lá»‡nh NPM                    | TÃªn Script               | Chá»©c nÄƒng & CÃ¡ch dÃ¹ng                                                                             |
| :-------------------------- | :----------------------- | :------------------------------------------------------------------------------------------------ |
| **`npm run tool:sql`**      | `exec-raw-sql-cli.js`    | **Cháº¡y SQL Query (MySQL/Postgres)**<br>ğŸ‘‰ `npm run tool:sql "SELECT * FROM users LIMIT 5"`        |
| **`npm run tool:mongo`**    | `helper-mongo-native.js` | **Cháº¡y MongoDB Aggregation**<br>ğŸ‘‰ `npm run tool:mongo orders '[{"$count": "total"}]'`            |
| **`npm run seed:50k`**      | `seed-50k-users.js`      | **BÆ¡m 50.000 User giáº£**<br>DÃ¹ng Ä‘á»ƒ táº¡o táº£i lá»›n trÆ°á»›c khi benchmark.<br>ğŸ‘‰ `npm run seed:50k`      |
| **`npm run fix-sequences`** | `fix-sequences.js`       | **Sá»­a lá»—i ID**<br>Äá»“ng bá»™ láº¡i Auto Increment ID (SQL) sau khi seed.<br>ğŸ‘‰ `npm run fix-sequences` |

---

## ğŸ“Š 3. Bá»™ Kiá»ƒm Thá»­ Hiá»‡u NÄƒng (Benchmarks)

NhÃ³m script nÃ y dÃ¹ng Ä‘á»ƒ Ä‘o Ä‘áº¡c vÃ  so sÃ¡nh tá»‘c Ä‘á»™ xá»­ lÃ½.

### ğŸï¸ A. So SÃ¡nh Tá»•ng Thá»ƒ (Cross-DB)

- **Lá»‡nh:** `npm run bench:cross-db`
- **File:** `tests/benchmark-cross-db-performance.js`
- **Má»¥c Ä‘Ã­ch:** Cháº¡y má»™t loáº¡t cÃ¡c bÃ i test tiÃªu chuáº©n trÃªn cáº£ 3 DB Ä‘á»ƒ xem ai vÃ´ Ä‘á»‹ch.
- **CÃ¡c bÃ i test:**
  1. `Count (100k)`: Äáº¿m sá»‘ lÆ°á»£ng báº£n ghi lá»›n.
  2. `Sum ($)`: TÃ­nh tá»•ng tiá»n (Aggregation).
  3. `Search (JSON)`: TÃ¬m kiáº¿m text trong JSON.
  4. `Join`: Káº¿t ná»‘i báº£ng Users vÃ  Orders.

### ğŸ“¦ B. JSON vs Relational (Architecture)

- **Lá»‡nh:** `npm run bench:json-rel`
- **File:** `tests/benchmark-json-vs-relational.js`
- **Má»¥c Ä‘Ã­ch:** Tráº£ lá»i cÃ¢u há»i _"NÃªn lÆ°u Items dáº¡ng JSON hay tÃ¡ch báº£ng con?"_
- **Chá»‰ sá»‘:** So sÃ¡nh tá»‘c Ä‘á»™ Read, Write vÃ  dung lÆ°á»£ng á»• cá»©ng (Storage Size).

### âš¡ C. Native vs Adapter (Optimization)

- **Lá»‡nh:** `npm run demo:native`
- **File:** `tests/demo-native-speed-gain.js`
- **Má»¥c Ä‘Ã­ch:** Chá»©ng minh sá»± chÃªnh lá»‡ch hiá»‡u nÄƒng giá»¯a viá»‡c dÃ¹ng thÆ° viá»‡n (Adapter/ORM) so vá»›i truy váº¥n thuáº§n (Native Query).

### ğŸ”¬ D. PhÃ¢n TÃ­ch SÃ¢u (Deep Dive)

- **Lá»‡nh:** `npm run analyze:adapter`
- **File:** `tests/analysis-adapter-vs-native.js`
- **Má»¥c Ä‘Ã­ch:** PhÃ¢n tÃ­ch cÃ¡c rá»§i ro ká»¹ thuáº­t nhÆ° _Race Condition_, _Memory Leak_ khi xá»­ lÃ½ dá»¯ liá»‡u lá»›n báº±ng logic á»©ng dá»¥ng thay vÃ¬ Database Engine.

---

## ğŸ“ 4. Ká»‹ch Báº£n Test Máº«u (Workflow)

Äá»ƒ thá»±c hiá»‡n bÃ i nghiÃªn cá»©u hoÃ n chá»‰nh, báº¡n cÃ³ thá»ƒ Ä‘i theo lá»™ trÃ¬nh sau:

### ğŸ”¹ BÆ°á»›c 1: Chuáº©n bá»‹ dá»¯ liá»‡u

```bash
# BÆ¡m dá»¯ liá»‡u lá»›n vÃ o MongoDB
# (Sá»­a .env -> DB_CONNECTION=mongodb)
npm run seed:50k

# BÆ¡m dá»¯ liá»‡u lá»›n vÃ o MySQL
# (Sá»­a .env -> DB_CONNECTION=mysql)
npm run seed:50k
```

### ğŸ”¹ BÆ°á»›c 2: Cháº¡y Benchmark so sÃ¡nh

```bash
# Cháº¡y báº£ng so sÃ¡nh tá»•ng quÃ¡t
npm run bench:cross-db
```

_Ghi láº¡i káº¿t quáº£ báº£ng console hiá»‡n ra._

### ğŸ”¹ BÆ°á»›c 3: Kiá»ƒm chá»©ng Query cá»¥ thá»ƒ

Náº¿u tháº¥y MySQL cháº­m á»Ÿ pháº§n tÃ¬m kiáº¿m, hÃ£y thá»­ cháº¡y query tay Ä‘á»ƒ debug:

```bash
npm run tool:sql "SELECT COUNT(*) FROM orders WHERE JSON_SEARCH(items, 'one', '%Phá»Ÿ%') IS NOT NULL"
```

---

> **LÆ°u Ã½:** Káº¿t quáº£ benchmark phá»¥ thuá»™c vÃ o cáº¥u hÃ¬nh pháº§n cá»©ng (CPU/RAM/Disk) cá»§a mÃ¡y báº¡n. HÃ£y táº¯t cÃ¡c á»©ng dá»¥ng náº·ng khÃ¡c khi cháº¡y Ä‘á»ƒ cÃ³ káº¿t quáº£ chÃ­nh xÃ¡c nháº¥t.
